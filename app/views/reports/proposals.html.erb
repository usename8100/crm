<%= content_for(:sidebar) do %>
<%= render partial: "layouts/sidebar", locals: {account: current_account} %>
<% end -%>
<div class="col-md-10 main">
	<div class="list-lead-main">
		<div class="lead-bo">
			
			<br><h3 style="margin-left: 30px;display: inline;"> Proposals Report</h3>
			<div class="border-x"></div>
			<div>
				<br>
				<center> 				
					<div></div>					
						<%= search_form_for @search, url: search_reports_path, html: {class: "form-inline col-md-8 col-md-offset-1", method: :post} do |f| %>
            <div class="col-md-4">
            	<%= f.label :Start_date, 'From '%>
              <%= f.text_field :created_at_gteq, class: "form-control datepicker", id:'start_date', placeholder:' 2021-12-10 15:00:00 UTC'%>
            </div>
            <div class="col-md-4 col-md-offset-1">
            	<%= f.label :end_date ,'To '  %>
              <%= f.text_field :created_at_lteq, class: "form-control datepicker", id:'end_date', placeholder:'2021-12-25 15:40:02 UTC' %>
            </div>
          <div class="col-md-2 col-md-offset-1 form-actions">
            <%= f.submit "Search", class: "btn btn-success" %>
          </div>
           <% end %>
				</center>
				<div style="border-bottom: 2px solid gray; margin-left: 20px;margin-right:20px; padding-top: 80px;"></div>
				<center>
					<table>
						<tr>
							<th style="height: 60px;">Proposals</th>
						</tr>
						<% @proposals.each do |proposal| %>
							<tr>
								<td>
									<%= proposal.subject %><br>
									Proposal ID: <%= proposal.id %><br>
									Customer: <%= proposal.get_customer %><br>
									Date From: <%= proposal.start_date %> - Open Till: <%= proposal.end_date %>br>
									Total: <%= proposal.total %>$<br>
									Status: <%= proposal.status %><br>
									Create: <%= proposal.created_at %><br>
									<span>
										<div class="btn-mini">
											<button type="button" class="btn btn-success btn-sm"><i class="fas fa-eye"></i> View Details</button>
											<button type="button" class="btn btn-warning btn-sm"><i class="fas fa-pencil-alt"></i> Edit</button>
											<button type="button" class="btn btn-danger btn-sm"><i class="fas fa-times"></i> Delete</button>
											<button type="button" class="btn btn-light btn-sm"><i class="fas fa-file-import"></i> Pdf</button>
											<button type="button" class="btn btn-info btn-sm"><i class="fas fa-envelope"></i> Send to Customer</button>
											<select style="background-color: green; color: white;border-radius: 4px;">
												<option selected disabled="">Convert</option>
												<option value="1">1</option>
												<option value="2">2</option>
											</select>
										</div>	
									</span>
								</td>
							</tr>
						<% end %>
					</table>
				</center>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	$('.datepicker').datepicker({
		format: 'yyyy-mm-dd'
	});
	$( ".datepicker" ).change(function() {
	if($('#end_date').val() < $('#start_date').val() )
	  {
	  	alert("Start date must be before end date!");
	  	$('#end_date').val($('#start_date').val())
	  }
	});
</script>
