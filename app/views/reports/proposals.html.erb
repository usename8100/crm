<%= content_for(:sidebar) do %>
<%= render partial: "layouts/sidebar", locals: {account: current_account} %>
<% end -%>
<div class="col-md-10 main">
	<div class="list-lead-main">
		<div class="lead-bo">
			
			<br><h3 style="margin-left: 30px;display: inline;"> Proposals Report</h3>
			<div class="border-x"></div>
			<div>
				<br>
				<center> 				
					<b>
						<%= search_form_for @q do |f| %>
					  <div class="input-daterange">
					    <span>
					      <%= f.label :Start_date, 'From', style:"margin-right: 20px ;" %>
					      <%= f.date_field :start_date_gteq, value:Time.zone.now.strftime("%F"), id:'start_date' %>

					      <%= f.label :end_date ,'To' ,  style:"margin-left: 200px;margin-right: 20px ;" %>
					      <%= f.date_field :end_date_lteq, value:Time.zone.now.strftime("%F") , id:'end_date' %>

					    <%= f.submit "Search" , class:'btn btn-success btn-sm', style:"margin-left: 40px ;" %> </span>
					<% end %>
				</b>
				</center><br><br>
				<div style="border-bottom: 2px solid gray; margin-left: 20px;margin-right:20px"></div>
				<center>
					<table>
						<tr>
							<th style="height: 60px;">Proposals</th>
						</tr>
						<% @proposals.each do |proposal| %>
							<tr>
								<td>
									<%= proposal.subject %><br>
									Proposal ID: <%= proposal.id %><br>
									Customer: <%= proposal.get_customer %><br>
									Date From: <%= proposal.start_date.strftime("%d-%m-%Y") %> - Open Till: <%= proposal.end_date.strftime("%d-%m-%Y") %><br>
									Total: <%= number_to_currency(proposal.total, :unit => "", :separator => ",", :delimiter => ".") %><br>
									Status: <%= proposal.status %><br>
									<span>
										<div class="btn-mini">
											<button type="button" class="btn btn-success btn-sm"><i class="fas fa-eye"></i> View Details</button>
											<button type="button" class="btn btn-warning btn-sm"><i class="fas fa-pencil-alt"></i> Edit</button>
											<button type="button" class="btn btn-danger btn-sm"><i class="fas fa-times"></i> Delete</button>
											<button type="button" class="btn btn-light btn-sm"><i class="fas fa-file-import"></i> Pdf</button>
											<button type="button" class="btn btn-info btn-sm"><i class="fas fa-envelope"></i> Send to Customer</button>
										</div>	
									</span>
								</td>
							</tr>
						<% end %>
					</table>
				</center>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	$( "input[name=date]" ).change(function() {
	if($('#end_date').val() < $('#start_date').val() )
	  {
	  	alert("Start date must be before end date!");
	  	$('#end_date').val($('#start_date').val())
	  }
	});
</script>